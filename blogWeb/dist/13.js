(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{521:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{model:{value:e.checkedTab,callback:function(t){e.checkedTab=t},expression:"checkedTab"}},[a("el-tab-pane",{attrs:{label:"我的信息",name:"userinfo"}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"头像"}},[a("el-row",{staticStyle:{"text-align":"center",height:"195px"}},[a("el-upload",{ref:"upload",staticStyle:{width:"100%"},attrs:{action:e.uploadUserAvatarUrl,name:"avatar","auto-upload":!1,headers:e.headers,"list-type":"picture","show-file-list":!1,"on-change":e.changeAvatar,title:"点击更换头像","on-success":e.changeAvatarSuccess}},[e.preAvatar?a("el-avatar",{attrs:{size:100,src:e.preAvatar}}):a("el-avatar",{attrs:{size:100,src:e.userInfo.avatar}}),e._v(" "),a("div",{staticStyle:{"font-size":"12px",color:"#c0c0c0"},attrs:{slot:"tip"},slot:"tip"},[e._v("推荐：100像素 × 100像素 支持JPG、PNG等格式，图片需小于2M")])],1),e._v(" "),e.preAvatar?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.sendChangeAvatar}},[e._v("确定")]):e._e(),e._v(" "),e.preAvatar?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.cancelChangeAvatar}},[e._v("取消")]):e._e()],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名："}},[a("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(e.userInfo.account))])]),e._v(" "),a("el-form-item",{attrs:{label:"昵称："}},[a("el-input",{attrs:{disabled:!e.isEdit},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],attrs:{type:"text"},on:{click:e.changeEdit}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"success"},on:{click:e.sendChange}},[e._v("提交")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"danger"},on:{click:e.changeEdit}},[e._v("取消")])],1)],1)],1)],1)};s._withStripped=!0;a(130);var n=a(19),r={data:function(){return{checkedTab:"userinfo",userInfo:"",isEdit:!1,uploadUserAvatarUrl:n.a.uploadUserAvatar(),preAvatar:"",headers:{Authorization:sessionStorage.getItem("authorization")}}},methods:{initWeb:function(){},changeAvatar:function(e,t){this.preAvatar=e.url,t.length>1&&t.shift()},changeEdit:function(){this.isEdit=!this.isEdit},sendChange:function(){var e=this,t={name:this.userInfo.name};n.a.changeUserInfo(t).then((function(t){var a=t.data;console.log(a),a.status&&(e.$message({type:"success",message:"成功"}),e.changeEdit())}))},cancelChangeAvatar:function(){this.preAvatar=""},sendChangeAvatar:function(){this.$refs.upload.submit()},changeAvatarSuccess:function(e){var t=this;console.log(e);var a={avatar:n.a.getImgUrl(e.data.img)};n.a.changeUserAvatar(a).then((function(e){var s=e.data;console.log(s),s.status&&(t.$message({type:"success",message:"修改头像成功"}),t.preAvatar="",t.userInfo.avatar=a.avatar)}))},getUserInfo:function(){var e=this;n.a.getUserInfo().then((function(t){var a=t.data;console.log(a),e.userInfo=a.data}))}},components:{},mounted:function(){this.getUserInfo()}},i=a(2),o=Object(i.a)(r,s,[],!1,null,"67c573a6",null);o.options.__file="src/pages/user/components/userInfo/UserInfo.vue";t.default=o.exports}}]);